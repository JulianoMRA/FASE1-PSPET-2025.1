<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
</head>
<body>
    <h1>Dashboard</h1>
    <a href="{% url 'index' %}">Início</a>
    <h2>Escolas</h2>
    <table border="1">
        <tr><th>Código</th><th>Nome</th><th>Ações</th></tr>
        {% for escola in escolas %}
        <tr>
            <td>{{ escola.codigo|default:escola.id }}</td>
            <td>{{ escola.nome }}</td>
            <td>
                <a href="{% url 'editar_escola' escola.id %}">Editar</a> |
                <a href="{% url 'excluir_escola' escola.id %}" onclick="return confirm('Tem certeza que deseja excluir esta escola?');">Excluir</a>
            </td>
        </tr>
        {% empty %}
        <tr><td colspan="3">Nenhuma escola cadastrada.</td></tr>
        {% endfor %}
    </table>

    <h2>Participantes</h2>
    <table border="1">
        <tr><th>Código</th><th>Nome</th><th>Escola</th><th>Ações</th></tr>
        {% for participante in participantes %}
        <tr>
            <td>{{ participante.codigo|default:participante.id }}</td>
            <td>{{ participante.nome }}</td>
            <td>{{ participante.escola.nome }}</td>
            <td>
                <a href="{% url 'editar_participante' participante.id %}">Editar</a> |
                <a href="{% url 'excluir_participante' participante.id %}" onclick="return confirm('Tem certeza que deseja excluir este participante?');">Excluir</a>
            </td>
        </tr>
        {% empty %}
        <tr><td colspan="4">Nenhum participante cadastrado.</td></tr>
        {% endfor %}
    </table>

    <h2>Provas</h2>
    <table border="1">
        <tr><th>Código</th><th>Gabarito</th><th>Ano</th><th>Nível</th><th>Fase</th><th>Ações</th></tr>
        {% for prova in provas %}
        <tr>
            <td>{{ prova.codigo|default:prova.id }}</td>
            <td>{{ prova.gabarito }}</td>
            <td>{{ prova.ano }}</td>
            <td>{{ prova.nivel }}</td>
            <td>{{ prova.fase }}</td>
            <td>
                <a href="{% url 'editar_prova' prova.id %}">Editar</a> |
                <a href="{% url 'excluir_prova' prova.id %}" onclick="return confirm('Tem certeza que deseja excluir esta prova?');">Excluir</a>
            </td>
        </tr>
        {% empty %}
        <tr><td colspan="6">Nenhuma prova cadastrada.</td></tr>
        {% endfor %}
    </table>

    <h2>Gabaritos Lidos</h2>
    <table border="1">
        <tr>
            <th>ID</th>
            <th>Prova</th>
            <th>Gabarito Lido</th>
            <th>Nota</th>
            <th>Participante</th>
            <th>Ações</th>
        </tr>
        {% for gabarito in gabaritos %}
        <tr>
            <td>{{ gabarito.codigo|default:gabarito.id }}</td>
            <td>{{ gabarito.prova.id_prova }} - {{ gabarito.prova.ano }} - {{ gabarito.prova.nivel }} - {{ gabarito.prova.fase }}</td>
            <td>{{ gabarito.gabarito_lido }}</td>
            <td>{{ gabarito.nota }} / 10</td>
            <td>
                {% if gabarito.participante %}
                    {{ gabarito.participante.nome }}
                {% else %}
                    -
                {% endif %}
            </td>
            <td>
                <a href="{% url 'editar_gabarito_lido' gabarito.id %}">Editar</a> |
                <a href="{% url 'excluir_gabarito_lido' gabarito.id %}" onclick="return confirm('Tem certeza que deseja excluir este gabarito lido?');">Excluir</a>
            </td>
        </tr>
        {% empty %}
        <tr><td colspan="6">Nenhum gabarito lido encontrado.</td></tr>
        {% endfor %}
    </table>
</body>
</html>